(this["webpackJsonpbkgallery-v2"]=this["webpackJsonpbkgallery-v2"]||[]).push([[0],{308:function(e,t,a){e.exports=a(624)},406:function(e,t,a){e.exports=a.p+"static/media/logo.a526f250.png"},456:function(e,t){},601:function(e,t,a){e.exports=a.p+"static/media/card_1.0d73cd00.jpg"},615:function(e,t,a){var n={"./cover_1.jpg":616,"./cover_2.jpg":617,"./cover_3.jpg":618,"./cover_4.jpg":619,"./cover_5.jpg":620};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=615},616:function(e,t,a){e.exports=a.p+"static/media/cover_1.e65fe284.jpg"},617:function(e,t,a){e.exports=a.p+"static/media/cover_2.7c31d188.jpg"},618:function(e,t,a){e.exports=a.p+"static/media/cover_3.bbe9108b.jpg"},619:function(e,t,a){e.exports=a.p+"static/media/cover_4.649d92bc.jpg"},620:function(e,t,a){e.exports=a.p+"static/media/cover_5.d9a05716.jpg"},622:function(e,t,a){},623:function(e,t,a){},624:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),c=a.n(o),i=a(9),s=a(10),l=a(12),u=a(11),m=a(14),p=a(15),d=a(87),h=a(5),f={authUser:null,currentUser:null},g=a(13),v=a(72),E=a.n(v),b={posts:[],currentPost:null,pagination:{current:1,total:0,totalPages:0,perPage:0}},y=a(32),k={bookmarks:[],pagination:{current:1,total:0,totalPages:0,perPage:0}},O={notifications:[],unread:0,pagination:{current:1,total:0,totalPages:0,perPage:0}},N={liked:{posts:[],pagination:{current:1,total:0,totalPages:0,perPage:0}},downloaded:{posts:[],pagination:{current:1,total:0,totalPages:0,perPage:0}}},j=Object(d.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN":case"GET_AUTH_USER":return Object(h.a)({},e,{authUser:t.payload});case"GET_USER_DETAIL":return Object(h.a)({},e,{currentUser:t.payload});case"UPDATE_USER_DETAIL":var a=t.payload,n=Object.assign({},e.authUser);if(n=Object(h.a)({},n,{},a),e.currentUser&&e.authUser._id.toString()==e.currentUser._id.toString()){var r=Object.assign({},e.currentUser);return r=Object(h.a)({},r,{},a),Object(h.a)({},e,{authUser:n,currentUser:r})}return Object(h.a)({},e,{authUser:n});case"LOGOUT_USER":return Object(h.a)({},e,{authUser:null});default:return Object(h.a)({},e)}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_POST":var a=Object(g.a)(e.posts);return a=[Object(h.a)({},t.payload,{likes:0,dislikes:0,downloads:0,reaction:null})].concat(Object(g.a)(a)),Object(h.a)({},e,{posts:a});case"GET_ALL_POSTS":var n=Object(g.a)(t.payload.posts);return t.payload.current>1&&(n=[].concat(Object(g.a)(e.posts),Object(g.a)(t.payload.posts))),Object(h.a)({},e,{posts:n,pagination:{current:t.payload.current,total:t.payload.total,totalPages:t.payload.pages,perPage:t.payload.perPage}});case"REACTION_POST":var r=t.payload,o=r.reaction,c=r.isRemove,i=Object(g.a)(e.posts),s=E.a.findIndex(e.posts,(function(e){return e._id.toString()==o.post.toString()}));return c?("like"==o.type?i[s].likes-=1:i[s].dislikes-=1,i[s].reaction=null):("like"==o.type?(i[s].likes+=1,"dislike"==i[s].reaction&&(i[s].dislikes-=1)):(i[s].dislikes+=1,"like"==i[s].reaction&&(i[s].likes-=1)),i[s].reaction=o.type),e.currentPost?Object(h.a)({},e,{posts:i,currentPost:i[s]}):Object(h.a)({},e,{posts:i});case"GET_POST_DETAIL":return Object(h.a)({},e,{currentPost:t.payload.post});case"UPDATE_POST_CONTENT":var l=t.payload.post,u=Object(g.a)(e.posts),m=E.a.findIndex(e.posts,(function(e){return e._id.toString()==l._id.toString()}));return u[m]=Object(h.a)({},u[m],{},l),e.currentPost?Object(h.a)({},e,{posts:u,currentPost:u[m]}):Object(h.a)({},e,{posts:u});case"DOWNLOAD_FILE":var p=Object(g.a)(e.posts),d=E.a.findIndex(e.posts,(function(e){return e._id.toString()==t.payload.toString()}));return p[d].downloads+=1,e.currentPost?Object(h.a)({},e,{posts:p,currentPost:p[d]}):Object(h.a)({},e,{posts:p});case"BOOKMARK_POST":case"REPORT_POST":return Object(h.a)({},e);case"DELETE_POST":var f=Object(g.a)(e.posts),v=f.filter((function(e){return e._id.toString()!=t.payload.toString()}));return e.currentPost._id.toString()==t.payload.toString()?Object(h.a)({},e,{posts:v,currentPost:null}):Object(h.a)({},e,{posts:v});default:return Object(h.a)({},e)}},bookmark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_BOOKMARK":var a=Object(g.a)(e.bookmarks);return a=[t.payload.record].concat(Object(g.a)(a)),Object(h.a)({},e,{bookmarks:a});case"GET_ALL_BOOKMARKS":var n=Object(g.a)(t.payload.records);return y.isMobile&&t.payload.current>1&&(n=[].concat(Object(g.a)(e.bookmarks),Object(g.a)(t.payload.records))),Object(h.a)({},e,{bookmarks:n,pagination:{current:t.payload.current,total:t.payload.total,totalPages:t.payload.pages,perPage:t.payload.perPage}});case"DELETE_BOOKMARK":var r=Object(g.a)(e.bookmarks),o=r.filter((function(e){return e._id.toString()!=t.payload.toString()}));return Object(h.a)({},e,{bookmarks:o});default:return Object(h.a)({},e)}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_NOTIFICATIONS":var a=Object(g.a)(t.payload.notifications);return t.payload.current>1&&(a=[].concat(Object(g.a)(e.notifications),Object(g.a)(t.payload.notifications))),Object(h.a)({},e,{notifications:a,pagination:{current:t.payload.current,total:t.payload.total,totalPages:t.payload.pages,perPage:t.payload.perPage}});case"MARK_ALL_AS_READ":var n=Object(g.a)(e.notifications);return n=n.map((function(e){return e.is_read=!0,e})),Object(h.a)({},e,{unread:0,notifications:n});case"MARK_NOTIFICATION_AS_READ":var r=Object(g.a)(e.notifications),o=E.a.findIndex(r,(function(e){return e._id.toString()==t.payload.toString()}));return r[o].is_read=!0,Object(h.a)({},e,{unread:e.unread-1,notifications:r});case"COUNT_UNREAD":return Object(h.a)({},e,{unread:t.payload});default:return Object(h.a)({},e)}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_LIST_LIKED":var a=Object(g.a)(t.payload.posts);return y.isMobile&&t.payload.current>1&&(a=[].concat(Object(g.a)(e.liked.posts),Object(g.a)(t.payload.posts))),Object(h.a)({},e,{liked:{posts:a,pagination:{current:t.payload.current,total:t.payload.total,totalPages:t.payload.pages,perPage:t.payload.perPage}}});case"GET_LIST_DOWNLOADED":var n=Object(g.a)(t.payload.posts);return y.isMobile&&t.payload.current>1&&(n=[].concat(Object(g.a)(e.downloaded.posts),Object(g.a)(t.payload.posts))),Object(h.a)({},e,{downloaded:{posts:n,pagination:{current:t.payload.current,total:t.payload.total,totalPages:t.payload.pages,perPage:t.payload.perPage}}});default:return Object(h.a)({},e)}}}),w=a(259),C=Object(d.d)(j,Object(d.a)(w.a)),_=a(23),x=a.n(_),S=a(39),T=a(79),L=a(639),P=a(640),A=a(631),R=a(111),M=a(55),U=a(625),D=a(645),B=a(264),I=a(642),F=a(90),K=a(643),G=a(78),z=a(637),H=a(632),V=a(626),W=a(646),q=a(647),X=a(648),Y=a(649),J=a(650),$=a(651),Q=a(652),Z=a(653),ee=a(654),te=a(655),ae=a(656),ne=a(657),re=a(658),oe=a(659),ce=a(22),ie=a.n(ce),se=a(109),le=a.n(se);function ue(e){var t=le()(),a=le.a.duration(t.diff(le()(e))),n=Math.ceil(a.asHours()),r=Math.ceil(a.asMinutes()),o=le()(e).format("HH:mm DD/MM/YYYY");return n<=23&&(o="".concat(n," gi\u1edd tr\u01b0\u1edbc")),r<60&&(o="".concat(r," ph\xfat tr\u01b0\u1edbc")),r<2&&(o="V\u1eeba xong"),o}function me(e){for(var t in e)t&&e[t]||delete e[t];return e}var pe=a(35),de=a(141),he=a.n(de);function fe(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var r=a[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}var ge=he.a.create({baseURL:"https://bkgallery.tk",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"*/*"}});ge.interceptors.request.use((function(e){var t=fe("bkgallery_token");return t&&(e.headers.common.token=t),e}),(function(e){return Promise.reject(e)}));var ve=ge,Ee=function(e){return function(t){return new Promise((function(a,n){return ve.get("/notifications",{params:e}).then((function(e){t({type:"GET_ALL_NOTIFICATIONS",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}},be=function(e){return function(t){return new Promise((function(a,n){return ve.put("/notifications/".concat(e)).then((function(n){t({type:"MARK_NOTIFICATION_AS_READ",payload:e}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}},ye=function(e){return function(e){return new Promise((function(t,a){return ve.put("/notifications").then((function(a){e({type:"MARK_ALL_AS_READ"}),t(!0)})).catch((function(e){console.error(e.response),a(e)}))}))}},ke=function(e){return function(e){return new Promise((function(t,a){return ve.get("/notifications/unread").then((function(a){e({type:"COUNT_UNREAD",payload:a.data.total}),t(!0)})).catch((function(e){console.error(e.response),a(e)}))}))}},Oe=function(e){return function(t){return new Promise((function(a,n){return ve.post("/users/signin",e).then((function(e){!function(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r=n.toUTCString();document.cookie=e+"="+t+";expires="+r+";path=/"}("bkgallery_token",e.data.token,30),t({type:"SIGN_IN",payload:e.data.user}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}},Ne=function(e,t){return function(a){return new Promise((function(n,r){return ve.put("/users/".concat(e),t).then((function(e){console.log(e.data.user),a({type:"UPDATE_USER_DETAIL",payload:e.data.user}),n(!0)})).catch((function(e){console.log(e.response),r(e)}))}))}},je=function(){return function(e){return new Promise((function(t,a){!function(e){var t=fe(e),a=new Date;a.setTime(a.getTime()-864e5);var n=a.toUTCString();document.cookie=e+"="+t+";expires="+n+";path=/;"}("bkgallery_token"),e({type:"LOGOUT_USER"}),t(!0)}))}},we=L.a.Header,Ce=P.a.Search,_e=A.a.confirm,xe=new window.Pusher("f3504a17049e9513ffc4",{cluster:"ap1"}),Se=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).userActions=[{icon:r.a.createElement(W.a,null),name:"Trang c\xe1 nh\xe2n",action:function(){return e.redirectToProfilePage()}},{icon:r.a.createElement(q.a,null),name:"\u0110\u0103ng xu\u1ea5t",action:function(){return e.onLogout()}}],e.state={visibleDrawer:!1},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getAllNotifications();case 2:return e.next=4,this.props.countUnread();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.user&&e.user!=this.props.user){var t=this;xe.subscribe("bkgallery-".concat(e.user._id)).bind("new-notification",(function(e){t.props.getAllNotifications()}))}}},{key:"fetchMoreNotifications",value:function(){this.props.getAllNotifications({page:this.props.pagination.current+1})}},{key:"toggleDrawer",value:function(e){this.setState({visibleDrawer:e})}},{key:"onSearch",value:function(e){this.toggleDrawer(!1),this.props.history.push({pathname:"/",search:ie.a.stringify({keyword:e})})}},{key:"redirectToProfilePage",value:function(){window.location.href="/users/".concat(this.props.user._id)}},{key:"onLogout",value:function(){var e=this;_e({title:"C\u1ea3nh b\xe1o",content:"B\u1ea1n mu\u1ed1n \u0111\u0103ng xu\u1ea5t kh\u1ecfi BK Gallery?",cancelText:"Hu\u1ef7",okText:"\u0110\u0103ng xu\u1ea5t",onOk:function(){return e.props.logout()}}),this.toggleDrawer(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.user,o=t.notifications,c=t.pagination,i=t.unread,s=this.state.visibleDrawer,l=ie.a.parse(this.props.location.search.slice(1));l=me(l);var u=this.props.location.pathname;return r.a.createElement(we,{id:"custom-header",style:{backgroundColor:"#d0021a"}},r.a.createElement(R.a,{justify:"space-between"},r.a.createElement(M.a,{className:"d-flex justify-content-between align-items-center"},r.a.createElement("div",{className:"logo"},r.a.createElement("a",{href:"/"},r.a.createElement(U.a,{shape:"square",size:40,src:a(406)}))),r.a.createElement(Ce,{defaultValue:l.keyword||"",className:"custom-searchbox ml-4",placeholder:"T\xecm ki\u1ebfm...",onSearch:function(t){return e.onSearch(t)}})),n?r.a.createElement(M.a,{id:"custom-desktop-menu"},r.a.createElement(D.a,{placement:"bottomRight",content:r.a.createElement("div",null,r.a.createElement(pe.a,{className:"notification-list",dataLength:c.perPage*c.current,next:function(){return e.fetchMoreNotifications()},hasMore:c.current<c.totalPages,loader:r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"})),height:350},o.map((function(t){var a="",n=null;return"like"==t.type?(n=r.a.createElement(X.a,null),a=t.comment?"".concat(t.creator.name," \u0111\xe3 th\xedch b\xecnh lu\u1eadn c\u1ee7a b\u1ea1n"):"".concat(t.creator.name," \u0111\xe3 th\xedch b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n")):"dislike"==t.type?(n=r.a.createElement(Y.a,null),a=t.comment?"".concat(t.creator.name," kh\xf4ng th\xedch b\xecnh lu\u1eadn c\u1ee7a b\u1ea1n"):"".concat(t.creator.name," kh\xf4ng th\xedch b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n")):"comment"==t.type?(n=r.a.createElement(J.a,null),a="".concat(t.creator.name," \u0111\xe3 b\xecnh lu\u1eadn v\u1ec1 b\xe0i vi\u1ebft b\u1ea1n \u0111ang theo d\xf5i")):"reply"==t.type&&(n=r.a.createElement($.a,null),a="".concat(t.creator.name," \u0111\xe3 tr\u1ea3 l\u1eddi b\xecnh lu\u1eadn m\xe0 b\u1ea1n \u0111ang tham gia ho\u1eb7c theo d\xf5i")),r.a.createElement(I.a.Item,{key:t._id,className:"d-flex justify-content-between align-items-center notification-items"},r.a.createElement(I.a.Item.Meta,{avatar:r.a.createElement(U.a,{src:t.creator.avatar}),title:r.a.createElement(m.b,{className:"text-none notification-content",to:"/posts/".concat(t.post._id)},a),description:r.a.createElement("div",null,n," ",r.a.createElement("small",null,ue(t.created_at)))}),t.is_read?r.a.createElement(F.a,{title:"\u0110\xe3 \u0111\u1ecdc"},r.a.createElement(K.a,{status:"default"})):r.a.createElement(F.a,{title:"\u0110\xe1nh d\u1ea5u \u0111\xe3 \u0111\u1ecdc"},r.a.createElement("div",{onClick:function(){return e.props.markNotificationAsRead(t._id)}},r.a.createElement(K.a,{color:"#d0021a"}))))}))),r.a.createElement("div",{className:"text-center"},r.a.createElement(G.a,{type:"link",className:"p-0",onClick:function(){return e.props.markAllAsRead()}},"\u0110\xe1nh d\u1ea5u t\u1ea5t c\u1ea3 \u0111\xe3 \u0111\u1ecdc"))),title:"Th\xf4ng b\xe1o"},r.a.createElement(G.a,{type:"link",icon:r.a.createElement(K.a,{count:i},r.a.createElement(Q.a,{className:"header-icons"}))})),r.a.createElement(D.a,{placement:"bottom",content:r.a.createElement(I.a,{size:"small",header:null,footer:null,bordered:!1,dataSource:this.userActions,renderItem:function(e){return r.a.createElement(I.a.Item,{className:"item-action-btn",onClick:e.action},e.icon," ",e.name)}}),title:null},r.a.createElement(G.a,{type:"link",icon:r.a.createElement(Z.a,{className:"header-icons"})}))):null,r.a.createElement(M.a,{id:"custom-mobile-menu"},r.a.createElement(G.a,{type:"link",icon:r.a.createElement(ee.a,{style:{color:"#fff"}}),onClick:function(){return e.toggleDrawer(!0)}}))),r.a.createElement(z.a,{placement:"right",closable:!1,onClose:function(){return e.toggleDrawer(!1)},visible:s},n?r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-mobile-items"},r.a.createElement(U.a,{src:n.avatar,size:20}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},n.name)):null,r.a.createElement(V.a,{className:"custom-sidebar-divider"}),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/"==u?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/",className:"text-none",onClick:function(){return e.toggleDrawer(!1)}},r.a.createElement(te.a,{twoToneColor:"#2ecc71",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"Trang ch\u1ee7"))),n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/notifications"==u?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/notifications",className:"text-none",onClick:function(){return e.toggleDrawer(!1)}},r.a.createElement(ae.a,{twoToneColor:"#f39c12",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"Th\xf4ng b\xe1o"))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/history/liked"==u?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/history/liked",className:"text-none",onClick:function(){return e.toggleDrawer(!1)}},r.a.createElement(ne.a,{twoToneColor:"#dd1818",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"\u0110\xe3 th\xedch"))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/history/downloaded"==u?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/history/downloaded",className:"text-none",onClick:function(){return e.toggleDrawer(!1)}},r.a.createElement(re.a,{twoToneColor:"#d35400",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"L\u1ecbch s\u1eed t\u1ea3i v\u1ec1"))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/bookmarks"==u?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/bookmarks",className:"text-none",onClick:function(){return e.toggleDrawer(!1)}},r.a.createElement(oe.a,{twoToneColor:"#3498db",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"L\u01b0u tr\u1eef"))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items"},r.a.createElement("div",{onClick:function(){return e.onLogout()}},r.a.createElement(q.a,{className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"\u0110\u0103ng xu\u1ea5t")))):null,r.a.createElement(V.a,{className:"custom-sidebar-divider"}),r.a.createElement(Ce,{defaultValue:l.keyword||"",placeholder:"T\xecm ki\u1ebfm...",onSearch:function(t){return e.onSearch(t)}})))}}]),n}(n.Component);var Te=Object(T.f)(Object(p.b)((function(e){return{user:e.user.authUser,notifications:e.notification.notifications,pagination:e.notification.pagination,unread:e.notification.unread}}),(function(e){return{logout:function(){return e(je())},getAllNotifications:function(){return e(Ee())},countUnread:function(){return e(ke())},markAllAsRead:function(){return e(ye())},markNotificationAsRead:function(t){return e(be(t))}}}))(Se)),Le=a(630),Pe=a(275),Ae=a.n(Pe),Re=a(276),Me=a.n(Re),Ue=L.a.Sider,De=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isAuthenticated:!1},e.responseFacebook=function(t){var a={auth_id:t.id,avatar:t.picture?t.picture.data.url:null,email:t.email,name:t.name,login_type:"facebook"};e.props.signIn(a)},e.responseGoogle=function(t){var a={auth_id:t.profileObj.googleId,avatar:t.profileObj.imageUrl,email:t.profileObj.email,name:t.profileObj.name,login_type:"google"};e.props.signIn(a)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.user,t=this.props.location.pathname;return e?r.a.createElement(Ue,{theme:"light",id:"custom-sidebar"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat(t=="/users/".concat(e._id)?"sidebar-items-active":"")},r.a.createElement(m.b,{className:"text-none",to:"/users/".concat(e._id)},r.a.createElement(U.a,{src:e.avatar,size:20}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},e.name))),r.a.createElement(V.a,{className:"sidebar-divider"}),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/"==t?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/",className:"text-none"},r.a.createElement(te.a,{twoToneColor:"#2ecc71",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"Trang ch\u1ee7"))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/history/liked"==t?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/history/liked",className:"text-none"},r.a.createElement(ne.a,{twoToneColor:"#dd1818",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"\u0110\xe3 th\xedch"))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/history/downloaded"==t?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/history/downloaded",className:"text-none"},r.a.createElement(re.a,{twoToneColor:"#d35400",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"L\u1ecbch s\u1eed t\u1ea3i v\u1ec1"))),r.a.createElement("div",{className:"d-flex justify-content-start align-items-center sidebar-items ".concat("/bookmarks"==t?"sidebar-items-active":"")},r.a.createElement(m.b,{to:"/bookmarks",className:"text-none"},r.a.createElement(oe.a,{twoToneColor:"#3498db",className:"sidebar-icon"}),r.a.createElement(H.a.Text,{className:"mb-0 ml-2"},"L\u01b0u tr\u1eef")))):r.a.createElement(Ue,{theme:"light",id:"custom-sidebar"},r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:3},"Xin ch\xe0o!"),r.a.createElement("div",null,"B\u1ea1n \u0111ang \u0111\u1ebfn v\u1edbi BK Gallery, c\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u d\xe0nh cho sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i. H\xe3y \u0111\u0103ng nh\u1eadp \u0111\u1ec3 c\xf3 th\u1ec3 xem, th\u1ea3 c\u1ea3m x\xfac b\xe0i vi\u1ebft, t\u1ea3i t\xe0i li\u1ec7u v\xe0 h\u01a1n th\u1ebf n\u1eefa!"),r.a.createElement(V.a,null,"\u0110\u0103ng nh\u1eadp v\u1edbi"),r.a.createElement("div",{className:"text-center"},r.a.createElement(Ae.a,{appId:"1951615681826197",autoLoad:!0,fields:"name,email,picture",callback:this.responseFacebook,textButton:"\u0110\u0103ng nh\u1eadp",icon:"fa-facebook"}),r.a.createElement("div",{className:"mt-1 mb-1"},"ho\u1eb7c"),r.a.createElement(Me.a,{clientId:"857631529122-33h9t3i8rgnnk2bghnvh8hr4fm088fp3.apps.googleusercontent.com",buttonText:"\u0110\u0103ng nh\u1eadp",onSuccess:this.responseGoogle,cookiePolicy:"single_host_origin"}))))}}]),a}(n.Component);var Be=Object(T.f)(Object(p.b)((function(e){return{user:e.user.authUser}}),(function(e){return{signIn:function(t){return e(Oe(t))}}}))(De)),Ie=L.a.Footer,Fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(Ie,null,"BKGallery \xa92020")}}]),a}(n.Component),Ke=a(638),Ge=a(279),ze=a.n(Ge),He=L.a.Content,Ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getAuthUser();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.user;return r.a.createElement("div",null,r.a.createElement(L.a,null,r.a.createElement(Te,null),r.a.createElement(He,{id:"main-content-wrapper"},r.a.createElement(L.a,null,r.a.createElement(Be,{user:e}),r.a.createElement(He,{id:"main-content"},this.props.children))),r.a.createElement(Fe,null)),r.a.createElement("div",{style:{visibility:"hidden"}},r.a.createElement(ze.a,{primaryColor:"#dd1818"})),r.a.createElement(Ke.a,null))}}]),a}(n.Component);var We=Object(p.b)((function(e){return{user:e.user.authUser}}),(function(e){return{getAuthUser:function(){return e((function(e){return new Promise((function(t,a){return ve.get("/users/auth").then((function(a){e({type:"GET_AUTH_USER",payload:a.data.user}),t(!0)})).catch((function(e){console.log(e.response),a(e)}))}))}))}}}))(Ve),qe=a(633),Xe=a(644),Ye=a(635),Je=a(636),$e=a(662),Qe=a(663),Ze=a(664),et=a(665),tt=a(666),at=a(667),nt=a(668),rt=a(669),ot=a(670),ct=a(671),it=a(672),st=a(673),lt=a(660),ut=a(661),mt=a(193),pt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={visible:!1,type:"like",reacted:!1},e.onClickReactionIcon=function(t){var a=!1;e.state.type==t&&e.state.reacted&&(a=!0),e.props.onReact(t,a),a?e.setState({visible:!1,type:"like",reacted:!1}):e.setState({visible:!1,type:t,reacted:!0})},e.handleVisibleChange=function(t){e.setState({visible:t})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({type:this.props.type,reacted:this.props.reacted})}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.type,o=t.reacted,c=null,i="Th\xedch",s=null;return"like"==n?o?(c=r.a.createElement(lt.a,{style:{color:"#3498db"},className:"custom-card-actions"}),s="#3498db"):c=r.a.createElement(X.a,{className:"custom-card-actions"}):"dislike"==n&&(i="Kh\xf4ng th\xedch",o?(c=r.a.createElement(ut.a,{style:{color:"#c0392b"},className:"custom-card-actions"}),s="#c0392b"):c=r.a.createElement(Y.a,{className:"custom-card-actions"})),r.a.createElement(D.a,{trigger:["hover","focus","click"],visible:a,content:r.a.createElement("div",{className:"d-flex"},r.a.createElement(mt.ShakeVertical,{dur:1e3,v:8},r.a.createElement(G.a,{type:"primary",shape:"circle",size:"small",onClick:function(){return e.onClickReactionIcon("like")}},r.a.createElement(X.a,{twoToneColor:"#3498db",className:"reaction-icons-1 like"}))),r.a.createElement(V.a,{type:"vertical"}),r.a.createElement(mt.ShakeVertical,{dur:1e3,v:8},r.a.createElement(G.a,{type:"primary",danger:!0,shape:"circle",size:"small",onClick:function(){return e.onClickReactionIcon("dislike")}},r.a.createElement(Y.a,{twoToneColor:"#c0392b",className:"reaction-icons-1 dislike"})))),onVisibleChange:this.handleVisibleChange},r.a.createElement("div",{className:"d-flex align-items-center justify-content-center",onClick:function(){return e.onClickReactionIcon(n)}},c,r.a.createElement("span",{className:"ml-2 custom-card-actions-text",style:{color:s}},o?r.a.createElement("strong",null,i):i)))}}]),a}(n.Component),dt=a(150),ht=a.n(dt),ft=a(152),gt=a(641),vt=a(107),Et=a.n(vt),bt=(a(184),a(185),a(627)),yt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={likes:0,dislikes:0,type:null,isShowReplies:!1,currentReplies:0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.comment;this.setState({likes:e.likes,dislikes:e.dislikes,reaction:e.reaction,currentReplies:e.child_comments.length,isShowReplies:this.props.isShowAllComments})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({isShowReplies:e.isShowAllComments})}},{key:"onReactComment",value:function(e){var t=!1,a=this.state,n=a.likes,r=a.dislikes,o=a.reaction;o==e&&(t=!0),this.props.reactComment({comment:this.props.comment._id,type:e,isRemove:t}),t?this.setState({reaction:null,likes:"like"==e?n-1:n,dislikes:"dislike"==e?r-1:r}):o?this.setState({reaction:e,likes:"like"==e?n+1:n-1,dislikes:"dislike"==e?r+1:r-1}):this.setState({reaction:e,likes:"like"==e?n+1:n,dislikes:"dislike"==e?r+1:r})}},{key:"onReply",value:function(){this.toggleShowReplies(!0),this.props.onReply()}},{key:"toggleShowReplies",value:function(){this.setState({isShowReplies:!this.state.isShowReplies})}},{key:"render",value:function(){var e=this,t=this.props,a=t.comment,n=t.children,o=this.state,c=o.likes,i=o.dislikes,s=o.reaction,l=o.isShowReplies;return r.a.createElement(bt.a,{actions:[r.a.createElement("span",{key:"comment-basic-like",onClick:function(){return e.onReactComment("like")}},r.a.createElement(F.a,{title:"Th\xedch"},"like"==s?r.a.createElement(lt.a,{style:{color:"#3498db"}}):r.a.createElement(X.a,null)),r.a.createElement("span",{className:"comment-action"},c)),r.a.createElement("span",{key:"comment-basic-dislike",onClick:function(){return e.onReactComment("dislike")}},r.a.createElement(F.a,{title:"Kh\xf4ng th\xedch"},"dislike"==s?r.a.createElement(ut.a,{style:{color:"#c0392b"}}):r.a.createElement(Y.a,null)),r.a.createElement("span",{className:"comment-action"},i)),r.a.createElement("span",{key:"comment-basic-reply-to",onClick:function(){return e.onReply()}},"Tr\u1ea3 l\u1eddi"),r.a.createElement("span",{key:"comment-basic-child",onClick:function(){return e.toggleShowReplies()}},a.child_comments.length?r.a.createElement("span",null,l?"Thu g\u1ecdn":"Xem ".concat(a.child_comments.length," tr\u1ea3 l\u1eddi")):null)],author:r.a.createElement(m.b,{to:"/users/".concat(a.user._id)},a.user.name),avatar:r.a.createElement(m.b,{className:"text-none",to:"/users/".concat(a.user._id)},r.a.createElement(U.a,{src:a.user.avatar})),content:ht()(a.content),datetime:ue(a.created_at)},l?n:null)}}]),a}(n.Component);var kt=Object(p.b)((function(e){return{}}),(function(e){return{reactComment:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.post("/comments/reaction",e).then((function(e){t({type:"REACTION_COMMENT",payload:e.data}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))}}}))(yt),Ot=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpenCreateForm:!1,value:"",comments:[],currentComment:null,isShowAllComments:!1,isLoadingSubmit:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getAllComments({post:this.props.post}).then((function(t){e.setState({comments:t.comments})}))}},{key:"onToggleModal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState({isOpenCreateForm:e,currentComment:t})}},{key:"onChange",value:function(e){this.setState({value:e})}},{key:"submit",value:function(){var e=Object(S.a)(x.a.mark((function e(t){var a,n,r,o,c=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state,n=a.value,r=a.currentComment,o=a.comments,this.setState({isLoadingSubmit:!0}),e.prev=3,e.next=6,this.props.createComment({post:this.props.post,content:n,parent_comment:r}).then((function(e){if(r){var t=Object(g.a)(o),a=t.findIndex((function(e){return e._id.toString()==r.toString()}));t[a].child_comments=[].concat(Object(g.a)(t[a].child_comments),[Object(h.a)({},e.comment,{user:c.props.user,child_comments:[]})]),c.setState({value:"",isOpenCreateForm:!1,comments:t,currentComment:null,isLoadingSubmit:!1})}else c.setState({value:"",isOpenCreateForm:!1,comments:[].concat(Object(g.a)(c.state.comments),[Object(h.a)({},e.comment,{user:c.props.user,child_comments:[]})]),currentComment:null,isLoadingSubmit:!1})}));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),this.setState({isLoadingSubmit:!1});case 11:case"end":return e.stop()}}),e,this,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onToggleShowComments",value:function(){this.setState({isShowAllComments:!this.state.isShowAllComments,collapseComment:!0})}},{key:"render",value:function(){var e=this,t=this.props.user,a=this.state,n=a.isOpenCreateForm,o=a.value,c=a.comments,i=a.isShowAllComments,s=a.isLoadingSubmit,l=i?c:c.slice(Math.max(c.length-2,0));return r.a.createElement("div",{className:"comments"},r.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},t?r.a.createElement(G.a,{type:"link",className:"p-0",onClick:function(){return e.onToggleModal(!0)}},"Th\xeam b\xecnh lu\u1eadn..."):r.a.createElement("div",null),c.length?r.a.createElement(r.a.Fragment,null,c.length>2?r.a.createElement("div",{className:"text-secondary toggle-comment-btn",onClick:function(){return e.onToggleShowComments()}},i?"Thu g\u1ecdn":"Xem ".concat(c.length," b\xecnh lu\u1eadn")):null):r.a.createElement("div",{className:"text-secondary"},"Ch\u01b0a c\xf3 b\xecnh lu\u1eadn n\xe0o")),l.length?r.a.createElement(I.a,{className:"comment-list",header:null,itemLayout:"horizontal",dataSource:l,renderItem:function(t){return r.a.createElement(kt,{key:t._id,comment:t,onReply:function(){return e.onToggleModal(!0,t._id)},isShowAllComments:i},t.child_comments.length?r.a.createElement(I.a,{className:"comment-list",header:null,itemLayout:"horizontal",dataSource:t.child_comments,renderItem:function(a){return r.a.createElement(kt,{comment:a,onReply:function(){return e.onToggleModal(!0,t._id)}})}}):null)}}):null,r.a.createElement(A.a,{visible:n,title:"Th\xeam b\xecnh lu\u1eadn",cancelText:"Hu\u1ef7",okText:"Th\xeam",onCancel:function(){return e.onToggleModal(!1)},onOk:function(t){return e.submit(t)},okButtonProps:{loading:s}},r.a.createElement("div",{className:"form-post mb-4"},r.a.createElement(Et.a,{theme:"bubble",placeholder:"Vi\u1ebft b\xecnh lu\u1eadn c\u1ee7a b\u1ea1n \u1edf \u0111\xe2y...",value:o,onChange:function(t){return e.onChange(t)},modules:{},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","link","image"]}))))}}]),a}(n.Component);var Nt=Object(p.b)((function(e){return{user:e.user.authUser}}),(function(e){return{createComment:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.post("/comments",e).then((function(e){t({type:"CREATE_COMMENT",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))},getAllComments:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.get("/comments",{params:e}).then((function(e){t({type:"GET_ALL_COMMENTS",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))}}}))(Ot),jt="https://bkgallery.github.io",wt="b9f70cee0ea3e49",Ct=a(289),_t=a.n(Ct),xt=function(e){return function(t){return new Promise((function(a,n){return ve.get("/posts",{params:e}).then((function(e){t({type:"GET_ALL_POSTS",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}},St=function(e){return function(t){return new Promise((function(a,n){return ve.post("/bookmarks",e).then((function(e){t({type:"CREATE_BOOKMARK",payload:e.data}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}},Tt=Le.a.Meta,Lt=A.a.confirm,Pt={display:"block",height:"30px",lineHeight:"30px"},At=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).postMoreActions=[{icon:r.a.createElement($e.a,null),name:"L\u01b0u b\xe0i vi\u1ebft",action:function(){return e.onBookmark()}},{icon:r.a.createElement(Qe.a,null),name:"B\xe1o c\xe1o b\xe0i vi\u1ebft n\xe0y",action:function(){return e.toggleReportModal(!0)}}],e.state={isShowCommentList:!0,isLoadingDownload:!1,isOpenReportModal:!1,isOpenUpdateModal:!1,reportValue:null,postContent:""},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({postContent:this.props.post.content}),this.props.user&&this.props.post.creator._id.toString()==this.props.user._id.toString()&&(this.postMoreActions=[{icon:r.a.createElement(Ze.a,null),name:"S\u1eeda n\u1ed9i dung b\xe0i vi\u1ebft",action:function(){return e.toggleUpdateModal(!0)}}].concat(Object(g.a)(this.postMoreActions),[{icon:r.a.createElement(et.a,null),name:"Xo\xe1 b\xe0i vi\u1ebft n\xe0y",action:function(){return e.onDelete(!0)}}]))}},{key:"onReact",value:function(e,t){this.props.reactPost({post:this.props.post._id,type:e,isRemove:t})}},{key:"toggleShowComments",value:function(){this.setState({isShowCommentList:!this.state.isShowCommentList})}},{key:"onDownload",value:function(){var e=this;this.setState({isLoadingDownload:!0}),this.props.downloadFile(this.props.post).then((function(){e.setState({isLoadingDownload:!1})})).catch((function(t){e.setState({isLoadingDownload:!1}),Ye.a.error({message:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra",description:"Vui l\xf2ng th\u1eed l\u1ea1i"})}))}},{key:"onBookmark",value:function(){this.props.createBookmark({post_id:this.props.post._id}).then((function(){Ye.a.success({message:"\u0110\xe3 l\u01b0u b\xe0i vi\u1ebft th\xe0nh c\xf4ng"})})).catch((function(e){console.log(e),Ye.a.error({message:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra",description:"Vui l\xf2ng th\u1eed l\u1ea1i"})}))}},{key:"toggleReportModal",value:function(e){this.setState({isOpenReportModal:e})}},{key:"onChangeReportValue",value:function(e){this.setState({reportValue:e.target.value})}},{key:"onReport",value:function(){var e=this;Lt({title:"C\u1ea3nh b\xe1o",content:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n b\xe1o c\xe1o b\xe0i vi\u1ebft n\xe0y ch\u1ee9?",cancelText:"Hu\u1ef7",okText:"OK",onOk:function(){e.props.reportPost({post_id:e.props.post._id,reason:e.state.reportValue}).then((function(){e.toggleReportModal(!1),Ye.a.success({message:"\u0110\xe3 b\xe1o c\xe1o b\xe0i vi\u1ebft th\xe0nh c\xf4ng"})})).catch((function(e){Ye.a.error({message:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra",description:"Vui l\xf2ng th\u1eed l\u1ea1i"})}))}})}},{key:"toggleUpdateModal",value:function(e){this.setState({isOpenUpdateModal:e,postContent:this.props.post.content})}},{key:"onChangePostContent",value:function(e){this.setState({postContent:e})}},{key:"onUpdate",value:function(){var e=this;Lt({title:"C\u1ea3nh b\xe1o",content:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n c\u1eadp nh\u1eadt b\xe0i vi\u1ebft n\xe0y ch\u1ee9?",cancelText:"Hu\u1ef7",okText:"OK",onOk:function(){e.props.updatePostDetail(e.props.post._id,{content:e.state.postContent}).then((function(){e.toggleUpdateModal(!1),Ye.a.success({message:"\u0110\xe3 c\u1eadp nh\u1eadt b\xe0i vi\u1ebft th\xe0nh c\xf4ng"})})).catch((function(e){Ye.a.error({message:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra",description:"Vui l\xf2ng th\u1eed l\u1ea1i"})}))}})}},{key:"onDelete",value:function(){var e=this;Lt({title:"C\u1ea3nh b\xe1o",content:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 b\xe0i vi\u1ebft n\xe0y ch\u1ee9?",cancelText:"Hu\u1ef7",okText:"OK",onOk:function(){e.props.deletePost(e.props.post._id).then((function(){Ye.a.success({message:"\u0110\xe3 xo\xe1 b\xe0i vi\u1ebft th\xe0nh c\xf4ng"})})).catch((function(e){Ye.a.error({message:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra",description:"Vui l\xf2ng th\u1eed l\u1ea1i"})}))}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.post,o=t.reaction,c=t.likeNumber,i=t.dislikeNumber,s=t.downloadNumber,l=this.state,u=l.isShowCommentList,p=l.isLoadingDownload,d=l.isOpenReportModal,h=l.isOpenUpdateModal,f=l.reportValue,g=l.postContent,v=[r.a.createElement(pt,{type:o||"like",reacted:o,onReact:function(t,a){return e.onReact(t,a)}}),r.a.createElement("div",{className:"d-flex align-items-center justify-content-center",onClick:function(){return e.toggleShowComments()}},r.a.createElement(J.a,{key:"comments",className:"custom-card-actions"}),r.a.createElement("span",{className:"ml-2 custom-card-actions-text"},"B\xecnh lu\u1eadn")),r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement(gt.a,{url:"".concat(jt,"/posts/").concat(n._id)},r.a.createElement(tt.a,{key:"share",className:"custom-card-actions"}),r.a.createElement("span",{className:"ml-2 custom-card-actions-text"},"Chia s\u1ebb")))];return n.file_id&&v.push(r.a.createElement("div",{className:"d-flex align-items-center justify-content-center",onClick:function(){return e.onDownload()}},p?r.a.createElement(at.a,{key:"download",className:"custom-card-actions"}):r.a.createElement(nt.a,{key:"download",className:"custom-card-actions"}),r.a.createElement("span",{className:"ml-2 custom-card-actions-text"},"T\u1ea3i v\u1ec1"))),a||(v=[r.a.createElement("div",{className:"d-flex align-items-center justify-content-center",onClick:function(){return e.toggleShowComments()}},r.a.createElement(J.a,{key:"comments",className:"custom-card-actions"}),r.a.createElement("span",{className:"ml-2 custom-card-actions-text"},"B\xecnh lu\u1eadn")),r.a.createElement("div",{className:"d-flex align-items-center justify-content-center"},r.a.createElement(gt.a,{url:"".concat(jt,"/posts/").concat(n._id)},r.a.createElement(tt.a,{key:"share",className:"custom-card-actions"}),r.a.createElement("span",{className:"ml-2 custom-card-actions-text"},"Chia s\u1ebb")))]),r.a.createElement("div",{className:"single-post"},r.a.createElement(Le.a,{actions:v},r.a.createElement("div",{className:"d-flex justify-content-between align-items-lg-start"},r.a.createElement(Tt,{avatar:r.a.createElement(m.b,{to:"/users/".concat(n.creator._id)},r.a.createElement(U.a,{src:n.creator.avatar,size:47})),title:r.a.createElement(m.b,{className:"text-none",to:"/users/".concat(n.creator._id)},r.a.createElement(H.a.Text,{strong:!0},n.creator.name)),description:r.a.createElement(m.b,{className:"text-secondary",to:"/posts/".concat(n._id)},r.a.createElement("small",null,r.a.createElement(rt.a,null)," ",ue(n.updated_at)))}),a?r.a.createElement("div",null,r.a.createElement(D.a,{placement:"bottom",content:r.a.createElement(I.a,{size:"small",header:null,footer:null,bordered:!1,dataSource:this.postMoreActions,renderItem:function(e){return r.a.createElement(I.a.Item,{onClick:e.action,className:"item-action-btn"},e.icon," ",e.name)}}),title:null},r.a.createElement(ot.a,{className:"post-more-action-btn"}))):null),r.a.createElement("div",{className:"mt-3 post-content"},ht()(n.content)),n.file_id?r.a.createElement(Le.a,{className:"mt-3"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(ct.a,{style:{fontSize:"40px"}}),r.a.createElement("div",{className:"ml-4"},r.a.createElement("h5",null,n.file_name),r.a.createElement("small",null)))):null,n.images.length?r.a.createElement("div",{className:"post-images"},r.a.createElement(ft.a,{images:n.images,countFrom:3,renderOverlay:function(){return"Xem \u1ea3nh"}})):null,r.a.createElement("div",{className:"d-flex justify-content-between align-items-center mt-3"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center"},r.a.createElement(it.a,{twoToneColor:"#3498db"}),r.a.createElement("span",{className:"ml-1"},c),r.a.createElement(V.a,{type:"vertical"}),r.a.createElement(st.a,{twoToneColor:"#c0392b"}),r.a.createElement("span",{className:"ml-1"},i)),r.a.createElement("div",null,s?"".concat(s," l\u01b0\u1ee3t t\u1ea3i v\u1ec1"):null))),u?r.a.createElement(Nt,{className:"comments",post:n._id}):null,r.a.createElement(A.a,{visible:d,onOk:function(){return e.onReport()},onCancel:function(){return e.toggleReportModal(!1)},title:"B\xe1o c\xe1o b\xe0i vi\u1ebft",okText:"G\u1eedi b\xe1o c\xe1o",cancelText:"Hu\u1ef7"},r.a.createElement(Je.a.Group,{onChange:function(t){return e.onChangeReportValue(t)},value:f},r.a.createElement(Je.a,{style:Pt,value:"not_relevant"},"N\u1ed9i dung b\xe0i vi\u1ebft kh\xf4ng li\xean quan t\u1edbi h\u1ecdc t\u1eadp"),r.a.createElement(Je.a,{style:Pt,value:"corrupt_file\x1c"},"Kh\xf4ng th\u1ec3 t\u1ea3i file"),r.a.createElement(Je.a,{style:Pt,value:"spam"},"B\xe0i vi\u1ebft spam"),r.a.createElement(Je.a,{style:Pt,value:"fake_news"},"Th\xf4ng tin sai l\u1ec7ch"))),r.a.createElement(A.a,{visible:h,onOk:function(){return e.onUpdate()},onCancel:function(){return e.toggleUpdateModal(!1)},title:"S\u1eeda b\xe0i vi\u1ebft",okText:"C\u1eadp nh\u1eadt",cancelText:"Hu\u1ef7"},r.a.createElement("div",{className:"form-post"},r.a.createElement(Et.a,{theme:"snow",placeholder:"B\u1ea1n mu\u1ed1n chia s\u1ebb \u0111i\u1ec1u g\xec?",value:g,onChange:function(t){return e.onChangePostContent(t)},modules:{toolbar:[[{header:[1,2,3,4,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],["link"]]},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","link","image"]}))))}}]),a}(n.Component);var Rt=Object(p.b)((function(e){return{user:e.user.authUser}}),(function(e){return{reactPost:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.post("/posts/reaction",e).then((function(e){t({type:"REACTION_POST",payload:e.data}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))},downloadFile:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.post("/posts/file",{post_id:e._id},{responseType:"blob"}).then((function(n){console.log(n.headers),t({type:"DOWNLOAD_FILE",payload:e._id}),_t.a.saveAs(n.data,e.file_name),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))},updatePostDetail:function(t,a){return e(function(e,t){return function(a){return new Promise((function(n,r){return ve.put("/posts/".concat(e),t).then((function(e){a({type:"UPDATE_POST_CONTENT",payload:e.data}),n(e.data)})).catch((function(e){console.error(e.response),r(e)}))}))}}(t,a))},reportPost:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.post("/posts/report",e).then((function(e){t({type:"REPORT_POST",payload:e.data}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))},deletePost:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.delete("/posts/".concat(e)).then((function(n){t({type:"DELETE_POST",payload:e}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))},createBookmark:function(t){return e(St(t))}}}))(At),Mt=a(629),Ut=a(674),Dt=a(675);function Bt(e){var t=new FormData;return t.append("image",e),t.set("type","file"),new Promise((function(e,a){return he.a.post("https://api.imgur.com/3/image",t,{headers:{Authorization:"Client-ID ".concat(wt)},mimeType:"multipart/form-data"}).then((function(t){console.log(t.data),e(t.data.data.link)})).catch((function(t){console.log(t),e(null)}))}))}var It=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,isFocused:!1,value:"",fileList:[],imageList:[],postType:"normal"},e.onChangeImage=function(t){var a=t.file,n=t.fileList;"uploading"!==a.status&&e.setState({imageList:n,fileList:[],postType:n.length?"image":"normal"})},e.onChangeFile=function(t){var a=t.file,n=t.fileList;a.size>=5e6?(Ye.a.warning({message:"C\u1ea3nh b\xe1o",description:"Kh\xf4ng th\u1ec3 upload file c\xf3 dung l\u01b0\u1ee3ng l\u1edbn h\u01a1n 5MB"}),e.setState({imageList:[],fileList:[],postType:"normal"})):"uploading"!==a.status&&e.setState({imageList:[],fileList:n,postType:n.length?"file":"normal"})},e}return Object(s.a)(a,[{key:"onChange",value:function(e){this.setState({value:e})}},{key:"onFocusEditor",value:function(e,t,a){this.setState({isFocused:!0})}},{key:"onBlurEditor",value:function(e,t,a){this.setState({isFocused:!1})}},{key:"onSubmit",value:function(){var e=Object(S.a)(x.a.mark((function e(t){var a,n,r,o,c,i,s,l,u=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({isLoading:!0}),a=this.state,n=a.fileList,r=a.imageList,o=a.value){e.next=7;break}Ye.a.error({message:"L\u1ed7i",description:"B\u1ea1n ch\u01b0a th\xeam n\u1ed9i dung b\xe0i vi\u1ebft"}),e.next=18;break;case 7:if((c=new FormData).set("content",o),n.length&&(i=n[0].originFileObj,c.append("file",i),c.set("fileName",i.name),c.set("fileType",i.type)),!r.length){e.next=17;break}return s=r.map((function(e){return Bt(e.originFileObj)})),e.next=14,Promise.all(s);case 14:l=(l=e.sent).filter((function(e){return e})),c.set("images",JSON.stringify(l));case 17:this.props.createPost(c).then((function(){u.setState({imageList:[],fileList:[],postType:"normal",isFocused:!1,value:"",isLoading:!1})})).catch((function(e){Ye.a.error({message:"L\u1ed7i",description:e.response.data.message}),u.setState({isLoading:!1})}));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.value,n=t.isFocused,o=t.fileList,c=t.imageList,i=t.postType,s=t.isLoading;return r.a.createElement(Le.a,{className:"form-post mb-4"},r.a.createElement(Et.a,{theme:n?"snow":"bubble",placeholder:"B\u1ea1n mu\u1ed1n chia s\u1ebb \u0111i\u1ec1u g\xec?",value:a,onChange:function(t){return e.onChange(t)},modules:{toolbar:[[{header:[1,2,3,4,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"}],["link"]]},formats:["header","bold","italic","underline","strike","blockquote","list","bullet","link","image"],onFocus:function(t,a,n){return e.onFocusEditor(t,a,n)}}),r.a.createElement(V.a,null),r.a.createElement("small",null,r.a.createElement("i",null,"L\u01b0u \xfd: B\u1ea1n ch\u1ec9 c\xf3 th\u1ec3 upload \u1ea3nh ho\u1eb7c file. Kh\xf4ng th\u1ec3 upload c\u1ea3 hai c\xf9ng l\xfac.")),r.a.createElement("div",{className:"d-flex justify-content-between align-items-start mt-2"},r.a.createElement("div",{className:"d-flex justify-content-start align-items-center",id:"upload-buttons"},"file"!=i?r.a.createElement(Mt.a,{onChange:this.onChangeImage,accept:"image/*",multiple:!0,beforeUpload:function(t){return e.setState((function(e){return{imageList:[].concat(Object(g.a)(e.imageList),[t])}})),!1},fileList:c,listType:"picture"},r.a.createElement(G.a,{shape:"round",icon:r.a.createElement(Ut.a,null)},"\u1ea2nh")):null,"image"!=i?r.a.createElement(Mt.a,{onChange:this.onChangeFile,beforeUpload:function(t){var a=t.file;return e.setState({fileList:[a]}),!1},fileList:o},r.a.createElement(G.a,{className:"ml-2",shape:"round",icon:r.a.createElement(Dt.a,null)},"File")):null),r.a.createElement(G.a,{loading:s,type:"primary",shape:"round",onClick:function(t){return e.onSubmit(t)}},"\u0110\u0103ng")))}}]),a}(n.Component);var Ft=Object(p.b)((function(e){return{}}),(function(e){return{createPost:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.post("/posts",e).then((function(e){t({type:"CREATE_POST",payload:e.data.post}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))}}}))(It),Kt=a(297),Gt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.ogTitle;return r.a.createElement(Kt.a,null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("title",null,t),r.a.createElement("meta",{"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}),r.a.createElement("meta",{name:"description",content:"C\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u h\u1ecdc t\u1eadp sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i"}),r.a.createElement("meta",{name:"keywords",content:"B\xe1ch Khoa,BK Gallery,bk gallery,bk,bkhn"}),r.a.createElement("meta",{name:"author",content:"zero2603"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),r.a.createElement("meta",{property:"og:title",content:a}),r.a.createElement("meta",{property:"og:type",content:"article"}),r.a.createElement("meta",{property:"og:url",content:"https://bkgallery.github.io/"}),r.a.createElement("meta",{property:"og:image",content:"https://bkgallery.github.io/og_image.jpg"}),r.a.createElement("meta",{property:"og:description",content:"BK Gallery l\xe0 c\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u h\u1ecdc t\u1eadp sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i"}))}}]),a}(n.Component),zt=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"fb-page","data-href":"https://www.facebook.com/bkgallery.fanpage/","data-tabs":"","data-width":"","data-height":"","data-small-header":"false","data-adapt-container-width":"true","data-hide-cover":"false","data-show-facepile":"true"},r.a.createElement("blockquote",{cite:"https://www.facebook.com/bkgallery.fanpage/",className:"fb-xfbml-parse-ignore"},r.a.createElement("a",{href:"https://www.facebook.com/bkgallery.fanpage/"},"BK Gallery"))),r.a.createElement(Le.a,{className:"mt-4",hoverable:!0,cover:r.a.createElement(F.a,{title:"\u1ea2nh: Tr\u1ea7n Ng\u1ecdc S\u01a1n"},r.a.createElement("img",{alt:"BKHN",src:a(601),className:"img-card"}))},r.a.createElement(Le.a.Meta,{title:"BK Gallery",description:r.a.createElement("div",null,r.a.createElement("p",null,"V\u1edbi m\u1ee5c \u0111\xedch ban \u0111\u1ea7u l\xe0 n\u01a1i t\u1ed5ng h\u1ee3p v\xe0 chia s\u1ebb t\xe0i li\u1ec7u \u0111\u1ea1i c\u01b0\u01a1ng cho sinh vi\xean \u0111\u1ea1i h\u1ecdc B\xe1ch Khoa H\xe0 N\u1ed9i, hi\u1ec7n t\u1ea1i BK Gallery chuy\u1ec3n h\u01b0\u1edbng sang l\xe0 m\u1ed9t c\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u, gi\xfap \u0111\u1ee1 l\u1eabn nhau c\xf9ng ti\u1ebfn b\u1ed9."),r.a.createElement("p",null,"\u0110\u01b0\u1ee3c t\u1ea1o ra t\u1eeb n\u0103m 2016, t\u1edbi nay BK Gallery \u0111\xe3 tr\u1edf th\xe0nh trang web chia s\u1ebb t\xe0i li\u1ec7u l\u1edbn nh\u1ea5t v\xe0 uy t\xedn \u0111\u1ed1i v\u1edbi sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i."))})))}}]),n}(n.Component),Ht=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=ie.a.parse(this.props.location.search.slice(1));t=me(t),this.props.getAllPosts(t).then((function(){e.setState({isLoading:!1})}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(console.log(e.location.search,this.props.location.search),e.location.search!==this.props.location.search){var a=ie.a.parse(e.location.search.slice(1));a=me(a),this.props.getAllPosts(a).then((function(){t.setState({isLoading:!1})}))}}},{key:"fetchMorePosts",value:function(){var e=ie.a.parse(this.props.location.search.slice(1));e=me(e),this.props.getAllPosts(Object(h.a)({},e,{page:this.props.pagination.current+1}))}},{key:"render",value:function(){var e=this,t=this.state.isLoading,a=this.props,n=a.user,o=a.posts,c=a.pagination;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{title:"BK Gallery",ogTitle:"BK Gallery | C\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u h\u1ecdc t\u1eadp sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i"}),r.a.createElement(R.a,{gutter:{xs:8,sm:16,md:24,lg:32}},r.a.createElement(M.a,{xs:24,sm:24,md:24,lg:15,xl:15},n?r.a.createElement(Ft,null):null,t?r.a.createElement(r.a.Fragment,null,[1,2,3,4,5].map((function(e){return r.a.createElement(Le.a,{key:e,className:"single-post"},r.a.createElement(qe.a,{avatar:!0,paragraph:{rows:4}}))}))):r.a.createElement(pe.a,{dataLength:c.perPage*c.current,next:function(){return e.fetchMorePosts()},hasMore:c.current<c.totalPages,loader:r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"}))},o.map((function(e,t){return r.a.createElement(Rt,{post:e,reaction:e.reaction,likeNumber:e.likes,dislikeNumber:e.dislikes,downloadNumber:e.downloads,key:e._id})})))),r.a.createElement(M.a,{xs:24,sm:24,md:24,lg:9,xl:9},r.a.createElement(Xe.a,{className:"mb-4",message:"L\u01b0u \xfd",type:"info",showIcon:!0,closable:!0,description:"K\xedch c\u1ee1 file t\u1ea3i l\xean t\u1ed1i \u0111a l\xe0 5MB"}),r.a.createElement(zt,null))))}}]),a}(n.Component);var Vt=Object(p.b)((function(e){return{user:e.user.authUser,posts:e.post.posts,pagination:e.post.pagination}}),(function(e){return{getAllPosts:function(t){return e(xt(t))}}}))(Ht),Wt=a(112),qt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getPostDetail(this.props.match.params.id).then((function(){e.setState({isLoading:!1})}))}},{key:"UNSAFE_componentWillReceiveProps",value:function(){var e=Object(S.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.match.params.id==this.props.match.params.id){e.next=5;break}return this.setState({isLoading:!0}),e.next=4,this.props.getPostDetail(t.match.params.id);case 4:this.setState({isLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isLoading,t=this.props.post;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{title:t?"B\xe0i vi\u1ebft c\u1ee7a ".concat(t.creator.name):"B\xe0i vi\u1ebft tr\xean BK Gallery",ogTitle:t?"BK Gallery - B\xe0i vi\u1ebft c\u1ee7a ".concat(t.creator.name," | C\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u h\u1ecdc t\u1eadp sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i"):"BK Gallery - B\xe0i vi\u1ebft | C\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u h\u1ecdc t\u1eadp sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i"}),r.a.createElement(R.a,{gutter:{xs:8,sm:16,md:24,lg:32}},r.a.createElement(M.a,{xs:24,sm:24,md:24,lg:15,xl:15},e?r.a.createElement(Le.a,{className:"single-post"},r.a.createElement(qe.a,{avatar:!0,paragraph:{rows:4}})):r.a.createElement(r.a.Fragment,null,t?r.a.createElement(Rt,{post:t,reaction:t.reaction,likeNumber:t.likes,dislikeNumber:t.dislikes,downloadNumber:t.downloads}):r.a.createElement(Le.a,{className:"single-post"},r.a.createElement(Wt.a,{description:"Kh\xf4ng t\xecm th\u1ea5y b\xe0i vi\u1ebft"})))),r.a.createElement(M.a,{xs:24,sm:24,md:24,lg:9,xl:9},r.a.createElement(zt,null))))}}]),a}(n.Component);var Xt=Object(p.b)((function(e){return{post:e.post.currentPost}}),(function(e){return{getPostDetail:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.get("/posts/".concat(e)).then((function(e){t({type:"GET_POST_DETAIL",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))}}}))(qt),Yt=a(628),Jt=a(676),$t=a(634),Qt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSubmit=function(t){e.props.updateUserDetail(e.props.user._id,t).then((function(){e.props.onCancel()}))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.visible,a=e.user,n=e.onCancel;return r.a.createElement(A.a,{visible:t,title:"C\u1eadp nh\u1eadt th\xf4ng tin user",onCancel:function(){return n()},footer:null},r.a.createElement($t.a,{layout:"vertical",initialValues:a,onFinish:this.onSubmit},r.a.createElement($t.a.Item,{name:"name",label:"T\xean c\u1ee7a b\u1ea1n",rules:[{required:!0,message:"Vui l\xf2ng \u0111i\u1ec1n t\xean c\u1ee7a b\u1ea1n"}]},r.a.createElement(P.a,null)),r.a.createElement($t.a.Item,{name:"description",label:"M\xf4 t\u1ea3 ng\u1eafn v\u1ec1 b\u1ea3n th\xe2n",rules:[{required:!1,message:"Vui l\xf2ng \u0111i\u1ec1n m\xf4 t\u1ea3"}]},r.a.createElement(P.a.TextArea,null)),r.a.createElement($t.a.Item,null,r.a.createElement(G.a,{type:"default",onClick:function(){return n()}},"Hu\u1ef7"),r.a.createElement(V.a,{type:"vertical"}),r.a.createElement(G.a,{type:"primary",htmlType:"submit"},"C\u1eadp nh\u1eadt"))))}}]),a}(n.Component);var Zt=Object(p.b)((function(e){return{}}),(function(e){return{updateUserDetail:function(t,a){return e(Ne(t,a))}}}))(Qt),ea=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).uploadRef=r.a.createRef(),e.state={isLoading:!0,isUpdateAvatarLoading:!1,isOpenUpdateForm:!1},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=Object(S.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getUserDetail(this.props.match.params.id);case 2:return e.next=4,this.props.getAllPosts({creator:this.props.match.params.id});case 4:this.setState({isLoading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"UNSAFE_componentWillReceiveProps",value:function(){var e=Object(S.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.match.params.id==this.props.match.params.id){e.next=7;break}return this.setState({isLoading:!0}),e.next=4,this.props.getUserDetail(t.match.params.id);case 4:return e.next=6,this.props.getAllPosts({creator:t.match.params.id});case 6:this.setState({isLoading:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMorePosts",value:function(){this.props.getAllPosts({page:this.props.pagination.current+1})}},{key:"toggleUpdateForm",value:function(e){this.setState({isOpenUpdateForm:e})}},{key:"openChangeAvatar",value:function(){this.uploadRef.current.click()}},{key:"onChangeAvatar",value:function(){var e=Object(S.a)(x.a.mark((function e(t){var a,n=this;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isUpdateAvatarLoading:!0}),"uploading"===t.status){e.next=6;break}return e.next=4,Bt(t);case 4:a=e.sent,this.props.updateUserDetail(this.props.authUser._id,{avatar:a}).then((function(){n.setState({isUpdateAvatarLoading:!1}),Ye.a.success({message:"\u0110\xe3 c\u1eadp nh\u1eadt avatar th\xe0nh c\xf4ng"})})).catch((function(){n.setState({isUpdateAvatarLoading:!1}),Ye.a.error({message:"L\u1ed7i",description:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra. Vui l\xf2ng th\u1eed l\u1ea1i,"})}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.isLoading,o=t.isUpdateAvatarLoading,c=t.isOpenUpdateForm,i=this.props,s=i.match,l=i.user,u=i.authUser,m=i.posts,p=i.pagination;if(n)return r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"}));var d=!1;return u&&s.params.id==u._id.toString()&&(d=!0),r.a.createElement(r.a.Fragment,null,r.a.createElement(Gt,{title:l?l.name:"BK Gallery",ogTitle:l?"".concat(l.name," tr\xean BK Gallery"):"BK Gallery | C\u1ed9ng \u0111\u1ed3ng chia s\u1ebb t\xe0i li\u1ec7u h\u1ecdc t\u1eadp sinh vi\xean B\xe1ch Khoa H\xe0 N\u1ed9i"}),r.a.createElement(R.a,{gutter:{xs:8,sm:16,md:24,lg:32}},r.a.createElement(M.a,{xs:24,sm:24,md:24,lg:15,xl:15},r.a.createElement("div",{className:"user-header-wrapper"},r.a.createElement(Yt.a,{autoplay:!0},[1,2,3,4,5].map((function(e){return r.a.createElement("div",{key:e},r.a.createElement("img",{src:a(615)("./cover_".concat(e,".jpg")),className:"cover-img"}))}))),d?r.a.createElement(F.a,{title:"C\u1eadp nh\u1eadt \u1ea3nh \u0111\u1ea1i di\u1ec7n"},r.a.createElement(U.a,{src:l.avatar,size:120,className:"user-avatar",onClick:function(){return e.openChangeAvatar()}})):r.a.createElement(U.a,{src:l.avatar,size:120,className:"user-avatar"}),r.a.createElement(Le.a,{className:"user-info"},r.a.createElement(H.a.Title,{level:3},l.name),r.a.createElement("div",null,r.a.createElement(J.a,null),r.a.createElement("span",{className:"ml-3"},l.description?l.description:"Ch\u01b0a c\xf3 m\xf4 t\u1ea3")),r.a.createElement("div",null,o?r.a.createElement(G.a,{type:"link",className:"p-0 mr-2"},r.a.createElement(at.a,null)):null,d?r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{className:"p-0",type:"link",icon:r.a.createElement(Jt.a,null),onClick:function(){return e.toggleUpdateForm(!0)}},"S\u1eeda th\xf4ng tin c\xe1 nh\xe2n"),r.a.createElement(V.a,{type:"vertical"})):null,r.a.createElement(gt.a,{url:"".concat(jt,"/users/").concat(l._id)},r.a.createElement(G.a,{className:"p-0",type:"link",icon:r.a.createElement(tt.a,null)},"Chia s\u1ebb"))))),r.a.createElement("div",{className:"user-posts"},d?r.a.createElement(Ft,null):null,r.a.createElement(pe.a,{dataLength:p.perPage*p.current,next:function(){return e.fetchMorePosts()},hasMore:p.current<p.totalPages,loader:r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"}))},m.map((function(e,t){return r.a.createElement(Rt,{post:e,reaction:e.reaction,likeNumber:e.likes,dislikeNumber:e.dislikes,downloadNumber:e.downloads,key:e._id})}))))),r.a.createElement(M.a,{xs:24,sm:24,md:24,lg:9,xl:9},r.a.createElement(Le.a,{className:"user-images-card mb-4"},r.a.createElement("div",{className:"user-images-title"},r.a.createElement(H.a.Title,{level:4},"H\xecnh \u1ea3nh c\u1ee7a ",l.name)),r.a.createElement("div",{className:"post-images"},r.a.createElement(ft.a,{images:l.images,countFrom:4,renderOverlay:function(){return"Xem \u1ea3nh"}}))),r.a.createElement(zt,null)),r.a.createElement(Zt,{visible:c,onCancel:function(){return e.toggleUpdateForm(!1)},user:l})),r.a.createElement(Mt.a,{accept:"image/*",multiple:!1,beforeUpload:function(e){return!1},listType:"picture",fileList:null,onChange:function(t){var a=t.file;t.fileList;return e.onChangeAvatar(a)}},r.a.createElement("div",{ref:this.uploadRef})))}}]),n}(n.Component);var ta=Object(p.b)((function(e){return{user:e.user.currentUser,authUser:e.user.authUser,posts:e.post.posts,pagination:e.post.pagination}}),(function(e){return{getUserDetail:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.get("/users/".concat(e)).then((function(e){t({type:"GET_USER_DETAIL",payload:e.data.user}),a(!0)})).catch((function(e){console.log(e.response),n(e)}))}))}}(t))},updateUserDetail:function(t,a){return e(Ne(t,a))},getAllPosts:function(t){return e(xt(t))}}}))(ea),aa=a(71),na=a(302),ra=a(122),oa=A.a.confirm,ca=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=ie.a.parse(this.props.location.search.slice(1));this.props.getAllBookmarks(t).then((function(){e.setState({isLoading:!1})}))}},{key:"fetchMore",value:function(){this.props.getAllBookmarks({page:this.props.pagination.current+1})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.location.search!==this.props.location.search){var a=ie.a.parse(e.location.search.slice(1));this.setState({isLoading:!0}),this.props.getAllBookmarks(a).then((function(){setTimeout((function(){t.setState({isLoading:!1})}),800)}))}}},{key:"onChangeFilter",value:function(e,t){this.setState({isLoading:!0});var a=ie.a.parse(this.props.location.search.slice(1));me(a=Object(h.a)({},a,Object(aa.a)({},e,t))),this.props.history.push({pathname:"/bookmarks",search:ie.a.stringify(a)})}},{key:"onDelete",value:function(e){var t=this;oa({title:"C\u1ea3nh b\xe1o",content:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n xo\xe1 m\u1ee5c \u0111\xe3 l\u01b0u ch\u1ee9?",cancelText:"Hu\u1ef7",okText:"OK",onOk:function(){t.props.deleteBookmark(e).then((function(){Ye.a.success({message:"\u0110\xe3 xo\xe1 th\xe0nh c\xf4ng"})})).catch((function(e){Ye.a.error({message:"\u0110\xe3 c\xf3 l\u1ed7i x\u1ea3y ra",description:"Vui l\xf2ng th\u1eed l\u1ea1i"})}))}})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.user,t.bookmarks),n=t.pagination;return r.a.createElement("div",null,a.length?r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"B\xe0i vi\u1ebft \u0111\xe3 l\u01b0u"),y.isBrowser?r.a.createElement("div",null,r.a.createElement(I.a,{itemLayout:"horizontal",dataSource:a,renderItem:function(t){return r.a.createElement(I.a.Item,{actions:[r.a.createElement(m.b,{to:"/posts/".concat(t.post._id)},r.a.createElement(G.a,{type:"link",className:"p-0"},"Xem b\xe0i vi\u1ebft")),r.a.createElement(G.a,{onClick:function(){return e.onDelete(t._id)},type:"link",danger:!0,className:"p-0"},"Xo\xe1")]},r.a.createElement(I.a.Item.Meta,{avatar:r.a.createElement(U.a,{src:t.post.creator.avatar}),title:r.a.createElement(m.b,{className:"text-none",to:"/users/".concat(t.post.creator._id)},t.post.creator.name),description:r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{lines:2,ellipsis:r.a.createElement("span",null,"...")},t.post.content),r.a.createElement("div",null,r.a.createElement("i",null," \u0110\xe3 l\u01b0u v\xe0o l\xfac ",ue(t.created_at))))}))}}),r.a.createElement("div",{className:"text-right mt-4"},r.a.createElement(na.a,Object.assign({},n,{pageSize:n.perPage,onChange:function(t,a){return e.onChangeFilter("page",t)}})))):null,y.isMobile?r.a.createElement(pe.a,{className:"notification-list",dataLength:n.perPage*n.current,next:function(){return e.fetchMore()},hasMore:n.current<n.totalPages,loader:r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"}))},a.map((function(t){return r.a.createElement(I.a.Item,{className:"bookmark-mobile-items d-flex justify-content-start flex-column align-content-start"},r.a.createElement(I.a.Item.Meta,{className:"w-100",avatar:r.a.createElement(U.a,{src:t.post.creator.avatar}),title:r.a.createElement(m.b,{className:"text-none",to:"/users/".concat(t.post.creator._id)},t.post.creator.name),description:r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a,{lines:2,ellipsis:r.a.createElement("span",null,"...")},t.post.content),r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("i",null,"\u0110\xe3 l\u01b0u v\xe0o l\xfac ",ue(t.created_at)))))}),r.a.createElement("div",{className:"w-100"},r.a.createElement(m.b,{to:"/posts/".concat(t.post._id)},r.a.createElement(G.a,{type:"link",className:"p-0"},"Xem b\xe0i vi\u1ebft")),r.a.createElement(V.a,{type:"vertical"}),r.a.createElement(G.a,{onClick:function(){return e.onDelete(t._id)},type:"link",danger:!0,className:"p-0"},"Xo\xe1")))}))):null):r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"B\xe0i vi\u1ebft \u0111\xe3 l\u01b0u"),r.a.createElement(Wt.a,{description:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})))}}]),a}(n.Component);var ia=Object(p.b)((function(e){return{user:e.user.authUser,bookmarks:e.bookmark.bookmarks,pagination:e.bookmark.pagination}}),(function(e){return{getAllBookmarks:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.get("/bookmarks",{params:e}).then((function(e){t({type:"GET_ALL_BOOKMARKS",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))},createBookmark:function(t){return e(St(t))},deleteBookmark:function(t){return e(function(e){return function(t){return new Promise((function(a,n){return ve.delete("/bookmarks/".concat(e)).then((function(n){t({type:"DELETE_BOOKMARK",payload:e}),a(!0)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))}}}))(ca),sa=(A.a.confirm,function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.getAllNotifications().then((function(){e.setState({isLoading:!1})}))}},{key:"fetchMoreNotifications",value:function(){this.props.getAllNotifications({page:this.props.pagination.current+1})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.user,t.notifications),n=t.pagination,o=t.unread;return r.a.createElement("div",null,a.length?r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"Th\xf4ng b\xe1o ",o?"(".concat(o,")"):null),r.a.createElement(G.a,{type:"link",className:"p-0",onClick:function(){return e.props.markAllAsRead()}},"\u0110\xe1nh d\u1ea5u t\u1ea5t c\u1ea3 \u0111\xe3 \u0111\u1ecdc"),y.isMobile?r.a.createElement(pe.a,{dataLength:n.perPage*n.current,next:function(){return e.fetchMoreNotifications()},hasMore:n.current<n.totalPages,loader:r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"}))},a.map((function(t){var a="",n=null;return"like"==t.type?(n=r.a.createElement(X.a,null),a=t.comment?"".concat(t.creator.name," \u0111\xe3 th\xedch b\xecnh lu\u1eadn c\u1ee7a b\u1ea1n"):"".concat(t.creator.name," \u0111\xe3 th\xedch b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n")):"dislike"==t.type?(n=r.a.createElement(Y.a,null),a=t.comment?"".concat(t.creator.name," kh\xf4ng th\xedch b\xecnh lu\u1eadn c\u1ee7a b\u1ea1n"):"".concat(t.creator.name," kh\xf4ng th\xedch b\xe0i vi\u1ebft c\u1ee7a b\u1ea1n")):"comment"==t.type?(n=r.a.createElement(J.a,null),a="".concat(t.creator.name," \u0111\xe3 b\xecnh lu\u1eadn v\u1ec1 b\xe0i vi\u1ebft b\u1ea1n \u0111ang theo d\xf5i")):"reply"==t.type&&(n=r.a.createElement($.a,null),a="".concat(t.creator.name," \u0111\xe3 tr\u1ea3 l\u1eddi b\xecnh lu\u1eadn m\xe0 b\u1ea1n \u0111ang tham gia ho\u1eb7c theo d\xf5i")),r.a.createElement(I.a.Item,{key:t._id,className:"d-flex justify-content-between align-items-center notification-items"},r.a.createElement(I.a.Item.Meta,{avatar:r.a.createElement(U.a,{src:t.creator.avatar}),title:r.a.createElement(m.b,{className:"text-none notification-content",to:"/posts/".concat(t.post._id)},a),description:r.a.createElement("div",null,n," ",r.a.createElement("small",null,ue(t.created_at)))}),t.is_read?r.a.createElement(F.a,{title:"\u0110\xe3 \u0111\u1ecdc"},r.a.createElement(K.a,{status:"default"})):r.a.createElement(F.a,{title:"\u0110\xe1nh d\u1ea5u \u0111\xe3 \u0111\u1ecdc"},r.a.createElement("div",{onClick:function(){return e.props.markNotificationAsRead(t._id)}},r.a.createElement(K.a,{color:"#d0021a"}))))}))):r.a.createElement(Wt.a,{description:"Ch\u1ec9 xem \u0111\u01b0\u1ee3c tr\xean \u0111i\u1ec7n tho\u1ea1i"})):r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"B\xe0i vi\u1ebft \u0111\xe3 l\u01b0u"),r.a.createElement(Wt.a,{description:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})))}}]),a}(n.Component));var la=Object(p.b)((function(e){return{user:e.user.authUser,notifications:e.notification.notifications,pagination:e.notification.pagination,unread:e.notification.unread}}),(function(e){return{getAllNotifications:function(){return e(Ee())},countUnread:function(){return e(ke())},markAllAsRead:function(){return e(ye())},markNotificationAsRead:function(t){return e(be(t))}}}))(sa),ua=a(156),ma=function(e){var t=e.item,a=Object(ua.a)(e,["item"]);return r.a.createElement(I.a.Item,a,r.a.createElement(I.a.Item.Meta,{avatar:r.a.createElement(U.a,{src:t.creator.avatar}),title:r.a.createElement(m.b,{className:"text-none",to:"/users/".concat(t.creator._id)},t.creator.name),description:r.a.createElement("div",null,r.a.createElement(ra.a,{lines:2,ellipsis:r.a.createElement("span",null,"...")},t.content),r.a.createElement("div",null,r.a.createElement("i",null," B\xe0i vi\u1ebft \u0111\u01b0\u1ee3c t\u1ea1o l\xfac ",ue(t.created_at))),r.a.createElement(m.b,{to:"/posts/".concat(t._id)},r.a.createElement(G.a,{type:"link",className:"p-0"},"Xem b\xe0i vi\u1ebft")))}))},pa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=ie.a.parse(this.props.location.search.slice(1));this.props.getListLiked(t).then((function(){e.setState({isLoading:!1})}))}},{key:"fetchMorePosts",value:function(){this.props.getListLiked({page:this.props.pagination.current+1})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.location.search!==this.props.location.search){var a=ie.a.parse(e.location.search.slice(1));this.setState({isLoading:!0}),this.props.getListLiked(a).then((function(){setTimeout((function(){t.setState({isLoading:!1})}),800)}))}}},{key:"onChangeFilter",value:function(e,t){this.setState({isLoading:!0});var a=ie.a.parse(this.props.location.search.slice(1));me(a=Object(h.a)({},a,Object(aa.a)({},e,t))),this.props.history.push({pathname:"/history/liked",search:ie.a.stringify(a)})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.user,t.posts),n=t.pagination;return this.state.isLoading?r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"})):r.a.createElement("div",null,a.length?r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"B\xe0i vi\u1ebft \u0111\xe3 th\xedch"),y.isBrowser?r.a.createElement("div",null,r.a.createElement(I.a,{itemLayout:"horizontal",dataSource:a,renderItem:function(e){return r.a.createElement(ma,{item:e,key:e._id})}}),r.a.createElement("div",{className:"text-right mt-4"},r.a.createElement(na.a,Object.assign({},n,{pageSize:n.perPage,onChange:function(t,a){return e.onChangeFilter("page",t)}})))):null,y.isMobile?r.a.createElement(pe.a,{className:"notification-list",dataLength:n.perPage*n.current,next:function(){return e.fetchMorePosts()},hasMore:n.current<n.totalPages,loader:r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"}))},a.map((function(e){return r.a.createElement(ma,{item:e,key:e._id})}))):null):r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"B\xe0i vi\u1ebft \u0111\xe3 th\xedch"),r.a.createElement(Wt.a,{description:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})))}}]),a}(n.Component);var da=Object(p.b)((function(e){return{user:e.user.authUser,posts:e.history.liked.posts,pagination:e.history.liked.pagination}}),(function(e){return{getListLiked:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return new Promise((function(a,n){return ve.get("/posts/liked",{params:e}).then((function(e){t({type:"GET_LIST_LIKED",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))}}}))(pa),ha=function(e){var t=e.item,a=Object(ua.a)(e,["item"]);return r.a.createElement(I.a.Item,a,r.a.createElement(I.a.Item.Meta,{avatar:r.a.createElement(U.a,{size:50,icon:r.a.createElement(ct.a,null),style:{backgroundColor:"#d00219"}}),title:t.file_name,description:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("i",null,"Ng\u01b0\u1eddi t\u1ea3i l\xean: ",r.a.createElement(m.b,{className:"text-none",to:"/users/".concat(t.creator._id)},t.creator.name))),r.a.createElement("div",null,r.a.createElement("i",null,"B\xe0i vi\u1ebft \u0111\u01b0\u1ee3c t\u1ea1o l\xfac ",ue(t.created_at))),r.a.createElement(m.b,{to:"/posts/".concat(t._id)},r.a.createElement(G.a,{type:"link",className:"p-0"},"Xem b\xe0i vi\u1ebft g\u1ed1c")))}))},fa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!0},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=ie.a.parse(this.props.location.search.slice(1));this.props.getListDownloaded(t).then((function(){e.setState({isLoading:!1})}))}},{key:"fetchMorePosts",value:function(){this.props.getListDownloaded({page:this.props.pagination.current+1})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.location.search!==this.props.location.search){var a=ie.a.parse(e.location.search.slice(1));this.setState({isLoading:!0}),this.props.getListDownloaded(a).then((function(){t.setState({isLoading:!1})}))}}},{key:"onChangeFilter",value:function(e,t){this.setState({isLoading:!0});var a=ie.a.parse(this.props.location.search.slice(1));me(a=Object(h.a)({},a,Object(aa.a)({},e,t))),this.props.history.push({pathname:"/history/downloaded",search:ie.a.stringify(a)})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.user,t.posts),n=t.pagination;return this.state.isLoading?r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"})):r.a.createElement("div",null,a.length?r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"L\u1ecbch s\u1eed t\u1ea3i v\u1ec1"),y.isBrowser?r.a.createElement("div",null,r.a.createElement(I.a,{itemLayout:"horizontal",dataSource:a,renderItem:function(e){return r.a.createElement(ha,{item:e,key:e._id})}}),r.a.createElement("div",{className:"text-right mt-4"},r.a.createElement(na.a,Object.assign({},n,{pageSize:n.perPage,onChange:function(t,a){return e.onChangeFilter("page",t)}})))):null,y.isMobile?r.a.createElement(pe.a,{className:"notification-list",dataLength:n.perPage*n.current,next:function(){return e.fetchMorePosts()},hasMore:n.current<n.totalPages,loader:r.a.createElement("div",{className:"text-center"},r.a.createElement(B.a,{size:"large"}))},a.map((function(e){return r.a.createElement(ha,{item:e,key:e._id})}))):null):r.a.createElement(Le.a,null,r.a.createElement(H.a.Title,{level:2},"L\u1ecbch s\u1eed t\u1ea3i v\u1ec1"),r.a.createElement(Wt.a,{description:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u"})))}}]),a}(n.Component);var ga=[{path:"/",component:Vt},{path:"/posts/:id",component:Xt},{path:"/users/:id",component:ta},{path:"/bookmarks",component:ia},{path:"/notifications",component:la},{path:"/history/liked",component:da},{path:"/history/downloaded",component:Object(p.b)((function(e){return{user:e.user.authUser,posts:e.history.downloaded.posts,pagination:e.history.downloaded.pagination}}),(function(e){return{getListDownloaded:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return new Promise((function(a,n){return ve.get("/posts/downloaded",{params:e}).then((function(e){t({type:"GET_LIST_DOWNLOADED",payload:e.data}),a(e.data)})).catch((function(e){console.error(e.response),n(e)}))}))}}(t))}}}))(fa)}],va=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(T.c,null,ga.map((function(e,t){return r.a.createElement(T.a,{exact:!0,path:e.path,component:e.component,key:t})})))}}]),a}(n.Component),Ea=(a(621),a(622),a(623),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,{store:C},r.a.createElement(m.a,{basename:"/"},r.a.createElement(We,null,r.a.createElement(va,null))))}}]),a}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Ea,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[308,1,2]]]);
//# sourceMappingURL=main.b47dd317.chunk.js.map